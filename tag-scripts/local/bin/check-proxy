#!/bin/sh
#
# pbrisbin 2015 - check that a proxy is working
#
###
check_ip() {
  curl --silent checkip.dyndns.org | sed 's/.*IP Address: \([^<]*\).*/\1/'
}

echo "Checking proxy..."
printf "IP address: %s\n" "$(check_ip)"
printf "Via proxy:  %s\n" "$(http_proxy=172.17.42.1:8118 check_ip)"

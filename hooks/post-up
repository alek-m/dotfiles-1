#!/usr/bin/env sh

secure() {
  local arg

  for arg; do
    if [ -d "$arg" ]; then
      chmod 700 "$arg"
    elif [ -f "$arg" ]; then
      chmod 600 "$arg"
    fi
  done
}

setup_vundle() {
  local bundles="$HOME/.vim/bundle"

  if [ ! -d "$bundles"/vundle ]; then
    mkdir -p "$bundles"
    git clone https://github.com/gmarik/vundle.git "$bundles"/vundle
  fi

  vim +BundleInstall +qall
}

touch ~/.netrc
secure ~/.netrc ~/.msmtprc ~/.config/gnupg

grep -sq '^Bundle' ~/.vimrc && setup_vundle

# dot-prefixed files are skipped unless explicitly named
rcup -K config/zsh/{.zprofile,.zshenv,.zshrc}

#!/usr/bin/env sh

touch ~/.secrets

[ -f ~/.msmtprc ] && chmod 600 ~/.msmtprc

if [ ! -d ~/.vim/bundle/vundle ]; then
  mkdir -p ~/.vim/bundle
  git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
fi

count=$(find ~/.vim/bundle -mindepth 1 -maxdepth 1 -type d -print | wc -l)

[ $count -eq 1 ] && vim +BundleInstall +qall

dotfiles="$(printf "$0" | sed 's|/hooks/post-up||')"

: ${ZDOTDIR:=$HOME/.config/zsh}

for zfile in .zprofile .zshenv .zshrc; do
  ln -fvs "$dotfiles/config/zsh/$zfile" "$ZDOTDIR/$zfile"
done

#!/usr/bin/env sh
#
# pbrisbin 2013 - on screen battery info
#
###

# TODO: capture "extras" like time to fully charged, time left etc
body="$(acpi | sed 's/^.*: \(.*\), \(.*\)%.*$/\1 \2/')"
state="${body% *}"
level="${body#* }"

case "$state" in
  Unknown|Discharging)
    icon='battery-caution'
    message="$state, $level%"

    [ $level -gt 10 ] && icon='battery-low'
    [ $level -gt 40 ] && icon='battery-good'
    [ $level -gt 97 ] && icon='battery-full'
    ;;

  Charging)
    icon='battery-low-charging'
    message="Charging, $level%"

    [ $level -gt 40 ] && icon='battery-good-charging'
    [ $level -gt 97 ] && icon='battery-full-charging'
    ;;

  Full)
    icon='battery-full-charged'
    message="Fully charged"
    ;;
esac

[ -n "$message" ] && notify-send -i "$icon" 'Battery' "$message"
